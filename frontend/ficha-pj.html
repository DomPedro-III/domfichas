<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha de Personagem - DomFichas</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/ficha-pj.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>DomFichas - Ficha de Personagem</h1>
            <div class="user-info">
                <span id="username-display"></span>
                <button onclick="location.href='fichas.html'" class="btn btn-secondary">Voltar</button>
                <button id="logout-btn" class="btn btn-secondary">Sair</button>
            </div>
        </header>
        
        <main>
            <div class="ficha-pj-container">
                <!-- Modo de visualização/edição -->
                <div id="modo-controles" class="modo-controles">
                    <button id="btn-editar" class="btn btn-primary" style="display: none;">Editar Ficha</button>
                    <button id="btn-salvar" class="btn btn-primary" style="display: none;">Salvar Alterações</button>
                    <button id="btn-cancelar" class="btn btn-secondary" style="display: none;">Cancelar</button>
                </div>

                <form id="ficha-pj-form">
                    <div class="ficha-header">
                        <div class="form-group">
                            <label for="nome">Nome do Personagem:</label>
                            <input type="text" id="nome" name="nome" required readonly>
                        </div>
                        <div class="basic-info">
                            <div class="form-group">
                                <label for="ocupacao">Ocupação/Classe:</label>
                                <input type="text" id="ocupacao" name="ocupacao" readonly>
                            </div>
                            <div class="form-group">
                                <label for="raca">Raça:</label>
                                <input type="text" id="raca" name="raca" readonly>
                            </div>
                        </div>
                    </div>

                    <div class="ficha-layout">
                        <!-- Coluna Esquerda -->
                        <div class="left-column">
                            <!-- Atributos -->
                            <div class="attributes-section">
                                <div class="attribute-card">
                                    <h4>FORÇA (STR)</h4>
                                    <div class="attribute-value" id="str-value">10</div>
                                    <input type="number" id="str" name="str" min="3" max="18" value="10" class="attribute-input" readonly>
                                </div>
                                <div class="attribute-card">
                                    <h4>DESTREZA (DEX)</h4>
                                    <div class="attribute-value" id="dex-value">10</div>
                                    <input type="number" id="dex" name="dex" min="3" max="18" value="10" class="attribute-input" readonly>
                                </div>
                                <div class="attribute-card">
                                    <h4>VONTADE (WIL)</h4>
                                    <div class="attribute-value" id="wil-value">10</div>
                                    <input type="number" id="wil" name="wil" min="3" max="18" value="10" class="attribute-input" readonly>
                                </div>
                            </div>

                            <!-- Pontos de Vida -->
                            <div class="hp-section">
                                <h3>PONTOS DE VIDA (HP)</h3>
                                <div class="hp-controls">
                                    <div class="form-group">
                                        <label for="hp_atual">Atual:</label>
                                        <input type="number" id="hp_atual" name="hp_atual" min="0" value="0" readonly>
                                    </div>
                                    <div class="form-group">
                                        <label for="hp_max">Máximo:</label>
                                        <input type="number" id="hp_max" name="hp_max" min="0" value="0" readonly>
                                    </div>
                                    <div class="hp-buttons">
                                        <button type="button" id="btn-dano" class="btn btn-small btn-danger" disabled>Tomar Dano</button>
                                        <button type="button" id="btn-cura" class="btn btn-small btn-primary" disabled>Curar</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Armadura e Ouro -->
                            <div class="stats-section">
                                <div class="form-group">
                                    <label for="armadura">Armadura:</label>
                                    <input type="number" id="armadura" name="armadura" min="0" max="3" value="0" readonly>
                                </div>
                                <div class="form-group">
                                    <label for="gp">Peças de Ouro (GP):</label>
                                    <input type="number" id="gp" name="gp" min="0" value="0" readonly>
                                </div>
                            </div>
                        </div>

                        <!-- Coluna Direita -->
                        <div class="right-column">
                            <!-- Inventário -->
                            <div class="inventory-section">
                                <h3>INVENTÁRIO (10 slots)</h3>
                                <div class="inventory-info">
                                    <span id="slots-usados">Slots usados: 0/10</span>
                                    <span id="slots-disponiveis">Disponíveis: 10</span>
                                </div>
                                
                                <div class="inventory-slots">
                                    <!-- Mãos -->
                                    <div class="inventory-category">
                                        <h5>MÃOS (2 slots)</h5>
                                        <div id="maos-slots" class="slots-container">
                                            <div class="slot-item" data-slot="mao1">
                                                <input type="text" placeholder="Item na mão direita" readonly>
                                            </div>
                                            <div class="slot-item" data-slot="mao2">
                                                <input type="text" placeholder="Item na mão esquerda" readonly>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Corpo -->
                                    <div class="inventory-category">
                                        <h5>CORPO (2 slots)</h5>
                                        <div id="corpo-slots" class="slots-container">
                                            <div class="slot-item" data-slot="corpo1">
                                                <input type="text" placeholder="Item no corpo 1" readonly>
                                            </div>
                                            <div class="slot-item" data-slot="corpo2">
                                                <input type="text" placeholder="Item no corpo 2" readonly>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Mochila -->
                                    <div class="inventory-category">
                                        <h5>MOCHILA (6 slots)</h5>
                                        <div id="mochila-slots" class="slots-container">
                                            <!-- Slots serão gerados dinamicamente -->
                                        </div>
                                    </div>
                                </div>

                                <!-- Controles de Inventário -->
                                <div class="inventory-controls" style="display: none;">
                                    <div class="form-group">
                                        <input type="text" id="novo-item" placeholder="Nome do item">
                                        <label>
                                            <input type="checkbox" id="item-bulky"> Item Volumoso (2 slots)
                                        </label>
                                        <button type="button" id="btn-adicionar-item" class="btn btn-small">Adicionar Item</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Spellbooks -->
                            <div class="spellbooks-section">
                                <h3>SPELLBOOKS</h3>
                                <div id="spellbooks-list" class="spellbooks-container">
                                    <!-- Spellbooks serão carregados aqui -->
                                </div>
                                <div class="spellbooks-controls" style="display: none;">
                                    <div class="form-group">
                                        <input type="text" id="novo-spellbook" placeholder="Nome do spellbook">
                                        <button type="button" id="btn-adicionar-spellbook" class="btn btn-small">Adicionar Spellbook</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Status e Notas -->
                    <div class="status-notes-section">
                        <div class="status-flags">
                            <label class="checkbox-label">
                                <input type="checkbox" id="fadiga" name="fadiga" disabled> Fadiga
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="privado" name="privado" disabled> Privado de Necessidades
                            </label>
                        </div>
                        
                        <div class="form-group">
                            <label for="notas">Notas:</label>
                            <textarea id="notas" name="notas" placeholder="Anotações sobre o personagem..." readonly></textarea>
                        </div>
                    </div>
                </form>

                <!-- Seção de Rolagem de Dados -->
                <div class="dice-section">
                    <h3>ROLAGEM DE DADOS</h3>
                    <div class="dice-controls">
                        <button type="button" class="btn btn-primary" onclick="rolarDado('d20')">D20</button>
                        <button type="button" class="btn btn-primary" onclick="rolarDado('d6')">D6</button>
                        <button type="button" class="btn btn-primary" onclick="rolarDado('d8')">D8</button>
                        <button type="button" class="btn btn-primary" onclick="rolarDado('d10')">D10</button>
                        <button type="button" class="btn btn-primary" onclick="rolarDado('d4')">D4</button>
                        <button type="button" class="btn btn-primary" onclick="rolarDado('d12')">D12</button>
                        <button type="button" class="btn btn-secondary" onclick="rolarSave('str')">STR Save</button>
                        <button type="button" class="btn btn-secondary" onclick="rolarSave('dex')">DEX Save</button>
                        <button type="button" class="btn btn-secondary" onclick="rolarSave('wil')">WIL Save</button>
                    </div>
                    
                    <div class="dice-result">
                        <span id="dice-result">--</span>
                    </div>

                    <div class="history-section">
                        <h4>Histórico de Rolagens</h4>
                        <div id="dice-history" class="history-list">
                            <!-- Histórico será carregado aqui -->
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal para dano/cura -->
    <div id="hp-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 id="hp-modal-title">Ajustar HP</h3>
            <div class="form-group">
                <label for="hp-quantidade">Quantidade:</label>
                <input type="number" id="hp-quantidade" min="1" value="1">
            </div>
            <button id="btn-confirmar-hp" class="btn btn-primary">Confirmar</button>
        </div>
    </div>

    <script src="js/auth.js"></script>
    <script src="js/dados.js"></script>
    <script src="js/ficha-pj.js"></script>
</body>
</html>